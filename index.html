<!DOCTYPE html>
<html>

<head>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, user-scalable=no,
		shrink-to-fit=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />

	<title>iBeacon Scan</title>

	<style>
		@import 'ui/css/evothings-app.css';
	</style>
     <link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.4.5.min.css"/>
     <link rel="stylesheet" type="text/css" href="css/jquery.mobile.icons.min.css"/>
	<script>
	// Redirect console.log to Evothings Workbench.
	if (window.hyper && window.hyper.log) { console.log = hyper.log }
	</script>
	<script src="cordova.js"></script>
	<script src="libs/jquery/jquery.js"></script>
	<script type="text/javascript" src="js/jquery.mobile-1.4.5.min.js"></script>
	<script src="libs/evothings/evothings.js"></script>
	<script src="libs/evothings/ui/ui.js"></script>
	<script src="app.js"></script>
    <script type="text/javascript" src="js/dati.js"></script>

</head>

<body>
	 <div data-role="page" id="home" >
        <div data-role="header" class="header" data-position="fixed">
            <h1 id="app-title">Beacon Scan</h1>
        </div>
        <div role="main" class="ui-content">
         <div class="ui-grid-solo ui-responsive">
          <ul id="found-beacons" class="dynamic"></ul>
        </div>
        <div data-role="popup" id="popupCloseLeft" class="ui-content" style="max-width:280px">
            <a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-delete ui-btn-icon-notext ui-btn-left">Close</a>
            <p style="font-size:16px;">Attiva Bluetooth</p>
        </div>
            <a href="#popupCloseLeft" data-rel="popup" style="display:none;" id="pop" data-position-to="window" class="ui-btn ui-corner-all ui-shadow ui-btn-inline">Left close button</a>
        </div>
        <div data-role="footer" data-position="fixed">
            <!--Tab bar jquery mobile-->
            <div data-role="navbar" data-iconpos="top">
                 <ul>
                    <li><a href="#home" data-icon="home"  data-transition="slide">Home</a></li>
                    <li ><a href="#database" data-icon="plus"   data-transition="slide">Database</a></li>
                </ul>
            </div>
        </div>
    </div>
	 <div data-role="page" id="database" >
        <div data-role="header" class="header" data-position="fixed">
            <h1 id="app-title">Db Sqlite</h1>
        </div>
        <div role="main" class="ui-content">
                  <ul>
                    <li> I dati sono scaricati dal server se c'è connessione </li>
                    <li> I dati sono caricati dal db interno se non c'è la connessione </li>
                 </ul>
                <hr>
         <div class="ui-grid-solo ui-responsive">
            <ul data-role="listview" id="lista_datiJson" data-split-theme="a" data-split-icon="delete" data-inset="true"></ul>
        </div>
        </div>
        <div data-role="footer" data-position="fixed">
            <!--Tab bar jquery mobile-->
            <div data-role="navbar" data-iconpos="top">
                 <ul>
                    <li><a href="#home" data-icon="home"  data-transition="slide">Home</a></li>
                    <li ><a href="#database" data-icon="plus"   data-transition="slide">Database</a></li>
                </ul>
            </div>
        </div>
    </div>
<script>
 $(document).on("pageinit", "#home", function () {
    
     navigator.notification.beep(2);
		  window.addEventListener('BluetoothStatus.disabled', function() {
    	     $("#pop").click();
    	});
      //  cordova.plugins.BluetoothStatus.promptForBT();
    
     
    });
     $(document).on("pageshow", "#home", function () {
    
     navigator.notification.alert(
    'You are the winner!',  // message
    alertDismissed,         // callback
    'Game Over',            // title
    'Done'                  // buttonName
);
    
     
    });
 
    function alertDismissed() {
    alert("ok");
}
 
   $(document).on("pageinit", "#database", function () {
      alert("ok");
       $("#lista_datiJson").html("");
       caricoDatiServerSalvoInDb ();
    });
	 $(document).on("pagebeforeshow", "#database", function () {
		 
         $("#lista_datiJson").html("");
         selezionoDati ();
    });
</script>
<!--	<header>
		<button class="back" onclick="history.back()">
			<img src="ui/images/arrow-left.svg" />
		</button>

		<img class="logotype" src="ui/images/logo.svg" alt="Evothings" />

		<!--<button class="menu" onclick=""><img src="ui/images/menu.svg" /></button>
	</header>

	<h1>iBeacon Scan</h1>
	<p id="warning">To detect iBeacons you will have to add the 128bit UUID's you
	are looking for to the regions array in app.js of the iBeacon example.
	</p>
	<ul id="found-beacons" class="dynamic"></ul>-->

</body>

</html>
